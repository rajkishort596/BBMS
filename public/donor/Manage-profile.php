<?php
include('../../config/init.php');

// Check if the user is logged in

if (!isset($_SESSION['user'])) {
    $_SESSION['no-log-in'] = "Please Login to acess your dashboard.";
    header('Location: ../register.php?login=true'); // Redirect to index or login page
    exit();
}
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donor Dashboard</title>
    <!--------------- goggle fonts link --------------->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../assets/styles/dashboard/dashboard.css" />
    <!--------------- Chart.js link --------------->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="grid dashboard-wrapper">
        <div class="overlay"></div>
        <?php
        include('../includes/header.php');
        $userType = 'donor';  // or 'admin', 'recipient'
        $currentPage = 'Manage Profile';  // set the current page for active link
        include('../includes/sidebar.php');
        ?>
        <main class="donor-dashboard dashboard">
            <div class="manage-profile-container container">
                <!-- Sidebar -->
                <div class="profile-sidebar flex-column">
                    <div class="tab-link active flex" data-target="profile-section">
                        <svg width="23" height="24" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 15C20.1421 15 23.5 11.6421 23.5 7.5C23.5 3.35786 20.1421 0 16 0C11.8579 0 8.5 3.35786 8.5 7.5C8.5 11.6421 11.8579 15 16 15Z" fill="#000" />
                            <path d="M16 17.5C9.78965 17.5069 4.75691 22.5397 4.75 28.75C4.75 29.4404 5.30963 30 5.99998 30H26C26.6903 30 27.2499 29.4404 27.2499 28.75C27.2431 22.5397 22.2104 17.5069 16 17.5Z" fill="#000" />
                        </svg>
                        Profile Settings
                    </div>
                    <div class="tab-link flex" data-target="address-section">
                        <svg width="23" height="24" viewBox="0 0 23 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_23_252)">
                                <path d="M11.5 12C12.2582 12 12.9993 11.7752 13.6297 11.354C14.2601 10.9327 14.7514 10.3341 15.0415 9.63361C15.3317 8.93316 15.4076 8.1624 15.2597 7.41881C15.1118 6.67521 14.7467 5.99218 14.2106 5.45608C13.6745 4.91998 12.9914 4.55489 12.2478 4.40698C11.5043 4.25907 10.7335 4.33498 10.033 4.62512C9.3326 4.91525 8.73391 5.40658 8.3127 6.03697C7.89149 6.66736 7.66667 7.40849 7.66667 8.16665C7.66667 9.18332 8.07053 10.1583 8.78942 10.8772C9.50831 11.5961 10.4833 12 11.5 12ZM11.5 6.24999C11.8791 6.24999 12.2496 6.3624 12.5648 6.573C12.88 6.78361 13.1257 7.08295 13.2708 7.43318C13.4158 7.7834 13.4538 8.16878 13.3798 8.54058C13.3059 8.91237 13.1233 9.25389 12.8553 9.52194C12.5872 9.78999 12.2457 9.97254 11.8739 10.0465C11.5021 10.1204 11.1167 10.0825 10.7665 9.93742C10.4163 9.79236 10.117 9.54669 9.90635 9.2315C9.69574 8.9163 9.58333 8.54574 9.58333 8.16665C9.58333 7.65832 9.78527 7.17081 10.1447 6.81137C10.5042 6.45192 10.9917 6.24999 11.5 6.24999ZM15.3333 21.6121L23 23.4789V13.4212C22.9998 12.8039 22.8009 12.2031 22.4328 11.7076C22.0647 11.2121 21.5468 10.8482 20.9559 10.6698L18.9434 9.99899C19.0905 9.40124 19.1655 8.788 19.1667 8.1724C19.1667 6.13908 18.3589 4.18903 16.9212 2.75125C15.4834 1.31347 13.5333 0.505737 11.5 0.505737C9.46667 0.505737 7.51663 1.31347 6.07885 2.75125C4.64107 4.18903 3.83333 6.13908 3.83333 8.1724C3.83617 8.56142 3.8682 8.94968 3.92917 9.33391C3.49396 9.1604 3.02286 9.09619 2.55709 9.14688C2.09132 9.19757 1.64507 9.36163 1.25738 9.62469C0.869683 9.88776 0.552357 10.2418 0.333161 10.6559C0.113964 11.07 -0.000424743 11.5315 1.18511e-06 12V21.3457L7.65038 23.5316L15.3333 21.6121ZM7.43379 4.10715C8.51407 3.04221 9.9714 2.44729 11.4883 2.452C13.0053 2.4567 14.4589 3.06065 15.5325 4.13227C16.6062 5.2039 17.2129 6.65637 17.2204 8.17329C17.228 9.69021 16.6358 11.1487 15.5729 12.2309L11.5 16.2167L7.43379 12.2386C6.35554 11.1603 5.74979 9.69781 5.74979 8.17288C5.74979 6.64796 6.35554 5.18548 7.43379 4.10715ZM1.91667 12C1.91546 11.8419 1.95396 11.6861 2.02864 11.5468C2.10332 11.4075 2.21178 11.2891 2.34408 11.2027C2.48248 11.1118 2.64191 11.0581 2.80706 11.0467C2.97221 11.0353 3.13751 11.0666 3.28708 11.1375L4.66133 11.6339C5.02901 12.362 5.51002 13.0271 6.08638 13.6042L11.5 18.9L16.9213 13.5975C17.4544 13.0652 17.9064 12.4576 18.263 11.7939L20.3876 12.5041C20.5877 12.5613 20.7637 12.6821 20.8891 12.8483C21.0144 13.0144 21.0823 13.2169 21.0824 13.425V21.0428L15.3333 19.6379L7.68583 21.5546L1.91667 19.9024V12Z" fill="black" />
                            </g>
                            <defs>
                                <clipPath id="clip0_23_252">
                                    <rect width="23" height="23" fill="white" transform="translate(0 0.5)" />
                                </clipPath>
                            </defs>
                        </svg>
                        Address
                    </div>
                    <div class="tab-link flex" data-target="contact-section">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_22_246)">
                                <path d="M20.656 14.856C19.461 13.714 17.567 13.715 16.374 14.863L14.91 16.028C11.712 14.671 9.436 12.39 7.978 9.08103L9.137 7.62503C10.283 6.43303 10.284 4.54003 9.143 3.34403C9.143 3.34403 7.291 0.93703 7.26 0.90603C6.054 -0.30197 4.088 -0.30097 2.933 0.85903L1.784 1.86203C0.634 3.01203 0 4.56503 0 6.23803C0 13.874 10.126 24 17.762 24C19.435 24 20.989 23.367 22.183 22.167L23.095 21.117C24.3 19.91 24.3 17.947 23.095 16.741C23.065 16.71 20.657 14.858 20.657 14.858L20.656 14.856ZM21.633 19.752L20.721 20.802C19.95 21.574 18.9 21.999 17.762 21.999C11.773 21.999 2 13.194 2 6.23703C2 5.09903 2.425 4.04803 3.146 3.32403L4.296 2.31903C4.51 2.10603 4.79 1.99903 5.071 1.99903C5.334 1.99903 5.597 2.09303 5.805 2.28203C5.805 2.28203 7.647 4.67503 7.677 4.70503C8.105 5.13203 8.105 5.82803 7.677 6.25403C7.65 6.28103 6.042 8.29803 6.042 8.29803C5.817 8.57903 5.763 8.95903 5.896 9.29303C7.609 13.561 10.577 16.525 14.717 18.105C15.045 18.231 15.419 18.173 15.696 17.954C15.696 17.954 17.714 16.346 17.74 16.319C18.154 15.905 18.875 15.905 19.289 16.319C19.319 16.35 21.714 18.192 21.714 18.192C22.102 18.622 22.088 19.289 21.629 19.752H21.633ZM23.121 0.87903C22.555 0.31203 21.802 2.95239e-05 21 2.95239e-05H17C15.346 0.00202952 14 1.34803 14 3.00103V9.62203C14.003 10.137 14.287 10.605 14.744 10.843C14.939 10.945 15.15 10.996 15.365 10.996C15.654 10.996 15.951 10.902 16.225 10.71L18.352 9.00003H20.999C22.653 9.00003 23.999 7.65403 23.999 6.00003V3.00003C23.999 2.19803 23.686 1.44503 23.12 0.87803L23.121 0.87903ZM22 6.00003C22 6.55103 21.552 7.00003 21 7.00003H18C17.772 7.00003 17.551 7.07803 17.373 7.22103L16.001 8.32603V3.00203C16.001 2.45103 16.449 2.00203 17 2.00203H21C21.268 2.00203 21.519 2.10503 21.707 2.29403C21.895 2.48303 22 2.73403 22 3.00203V6.00203V6.00003Z" fill="black" />
                            </g>
                            <defs>
                                <clipPath id="clip0_22_246">
                                    <rect width="24" height="24" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>
                        Contact Details
                    </div>
                    <div class="tab-link flex" data-target="password-section">
                        <svg width="21" height="24" viewBox="0 0 21 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.2083 8.16667V7.20833C17.2083 5.42917 16.5016 3.72288 15.2435 2.46483C13.9855 1.20677 12.2792 0.5 10.5 0.5C8.72084 0.5 7.01455 1.20677 5.7565 2.46483C4.49844 3.72288 3.79167 5.42917 3.79167 7.20833V8.16667H0.916672V20.625C0.916672 21.3875 1.21957 22.1188 1.75874 22.6579C2.29791 23.1971 3.02917 23.5 3.79167 23.5H17.2083C17.9708 23.5 18.7021 23.1971 19.2413 22.6579C19.7804 22.1188 20.0833 21.3875 20.0833 20.625V8.16667H17.2083ZM5.70834 7.20833C5.70834 5.9375 6.21317 4.71873 7.11179 3.82011C8.0104 2.9215 9.22918 2.41667 10.5 2.41667C11.7708 2.41667 12.9896 2.9215 13.8882 3.82011C14.7868 4.71873 15.2917 5.9375 15.2917 7.20833V8.16667H5.70834V7.20833ZM18.1667 20.625C18.1667 20.8792 18.0657 21.1229 17.886 21.3026C17.7063 21.4824 17.4625 21.5833 17.2083 21.5833H3.79167C3.53751 21.5833 3.29375 21.4824 3.11403 21.3026C2.93431 21.1229 2.83334 20.8792 2.83334 20.625V10.0833H18.1667V20.625Z" fill="black" />
                            <path d="M11.4583 13.9167H9.54167V17.75H11.4583V13.9167Z" fill="black" />
                        </svg>
                        Password
                    </div>
                </div>
                <?php
                // Including All the tab-contents
                include('tabs/profile.php');

                include('tabs/address.php');

                include('tabs/contact.php');

                include('tabs/password.php');
                ?>
            </div>
        </main>
    </div>
    <script src="../../assets/js/app.js"></script>
    <script src="../../assets/js/Tabs.js"></script>
    <script src="../../assets/js/jQuery.js"></script>
    <script src="../../assets/js/ajax/updateProfile.js"></script>
    <script>
        const showPassword = (action) => {
            const passwordField = document.getElementById('password');
            const closeEye = document.querySelector('.eye-icon.close');
            const openEye = document.querySelector('.eye-icon.open');

            if (action === 'close') {
                passwordField.type = 'text';
                closeEye.style.display = 'none';
                openEye.style.display = 'block';
            } else {
                passwordField.type = 'password';
                closeEye.style.display = 'block';
                openEye.style.display = 'none';
            }
        };
    </script>
</body>

</html>